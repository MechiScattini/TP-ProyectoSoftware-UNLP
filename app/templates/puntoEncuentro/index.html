{% extends "layout.html" %}
{% block title %}Usuarios{% endblock %}
{% block head %}
  {{ super() }}
{% endblock %}
{% block content %}
<div style="display: flex; justify-content: space-around;">
  <form action="" method="GET">
    <input type="search" placeholder="Buscar por nombre" name="q">
    <button type="submit">Buscar</button>
  </form>
  <form action="" method="GET">
    <label for="publicado">Publicado</label>
    <input type="checkbox" placeholder="Publicado" name="filter_option" id="publicado" value="1">
    <label for="despublicado">Despublicado</label>
    <input type="checkbox" placeholder="Despublicado" name="filter_option" id="despublicado" value="2">
    <button type="submit">Filtrar</button>
  </form>
  
</div>
<h1>Puntos de encuentro</h1>
  {% if puntos.items %}
    <div class="table-responsive">
      <table class="table table-sm table-borderless mb-0">
          <thead class="thead-dark">
              <tr>
                  <th>#</th>
                  <th>Nombre</th>
                  <th>Direccion</th>
                  <th>Coordenadas</th>
                  <th>Telefono</th>
                  <th>Email</th>
                  <th>Acciones</th>
              </tr>
          </thead>
          <tbody>
              {% for punto in puntos.items %}
              <tr>
                  <th scope="row">{{ loop.index }}</th>
                  <td>{{ punto.nombre }}</td>
                  <td>{{ punto.direccion }}</td>
                  <td>{{ punto.coordenadas }}</td>
                  <td>{{ punto.telefono }}</td>
                  <td>{{ punto.email }}</td>
                  <td><a href="{{ url_for('puntoEncuentro_update', id_punto=punto.id) }}" class="btn btn-outline-dark" style="width: 100px;
                    height: 50px;">Editar</a>
                    <!-- Faltaría chequear si tiene permisos %} -->
                    <a href="{{ url_for('puntoEncuentro_destroy', id_punto=punto.id) }}" class="btn btn-outline-dark" style="width: 100px;
                    height: 50px;" onclick="return confirm('Eliminar {{punto.nombre}}')">Eliminar</a>
                  </td>
              </tr>
              {% endfor %}
          </tbody>
      </table>
    </div>

    <!-- Pagination Links-->
    <div class="text-right" style="display: flex; justify-content: center;">
      <a href="{{ url_for('puntoEncuentro_index', page=puntos.prev_num) }}"
        class="btn btn-outline-dark 
        {% if puntos.page == 1 %}disabled{% endif %}">
          &laquo;
      </a><!-- Loop through the number of pages to display a link for each-->
      {% for page_num in puntos.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
          {% if page_num %}
    <!-- Check for the active page and set the link to "Active"-->
              {% if puntos.page == page_num %}
              <a href="{{ url_for('puntoEncuentro_index', page=page_num) }}"
                class="btn btn-dark">
                  {{ page_num }}
              </a>
              {% else %}
              <a href="{{ url_for('puntoEncuentro_index', page=page_num) }}"
                class="btn btn-outline-dark">
                  {{ page_num }}
              </a>
              {% endif %}
          {% else %}
              ...
          {% endif %}
      {% endfor %}    <a href="{{ url_for('puntoEncuentro_index', page=puntos.next_num) }}"
        class="btn btn-outline-dark 
        {% if puntos.page == puntos.pages %}disabled{% endif %}">
          &raquo;
      </a>
    </div>
    <p class="text-right mt-3" style="display: flex; justify-content: center;">
    Página {{ puntos.page }} de {{ puntos.pages }}
    </p>
    {% else %}
      <h3 style="display: flex; justify-content: center; ">No hay puntos de encuentro cargados</h3>
    {% endif %}
    <div style="display: flex; justify-content: center; ">
    <a href="{{ url_for('puntoEncuentro_new') }}" class="btn btn-outline-dark" style="width: 100px;
    height: 50px;">Nuevo</a>
    <a href="{{ url_for('home') }}" class="btn btn-outline-dark" style="width: 100px;
    height: 50px;">Volver</a>
    </div>
{% endblock %}